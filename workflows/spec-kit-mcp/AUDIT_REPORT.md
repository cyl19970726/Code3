# spec-kit-mcp å…¨é¢å®¡æŸ¥æŠ¥å‘Š

> å®¡æŸ¥æ—¥æœŸï¼š2025-10-03
> å®¡æŸ¥äººï¼šClaude (Sonnet 4.5)
> çŠ¶æ€ï¼šâœ… **æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œå¯æŠ•å…¥ä½¿ç”¨**

---

## æ‰§è¡Œæ‘˜è¦

spec-kit-mcp å·²å®Œæˆå…¨é¢å®¡æŸ¥ï¼ŒåŒ…æ‹¬ï¼š
- âœ… å®Œæ•´ä¾èµ–éªŒè¯
- âœ… æ‰€æœ‰è„šæœ¬åŠŸèƒ½å¢å¼º
- âœ… å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•
- âœ… å·¥ä½œæµç¨‹å¯è¡Œæ€§éªŒè¯

**æµ‹è¯•ç»“æœ**ï¼š35/35 æµ‹è¯•é€šè¿‡ âœ…

---

## å‘ç°å¹¶ä¿®å¤çš„é—®é¢˜

### ğŸ”´ ä¸¥é‡é—®é¢˜ï¼ˆå·²ä¿®å¤ï¼‰

#### 1. check-prerequisites.sh ç¼ºå°‘å‚æ•°æ”¯æŒ
**é—®é¢˜**ï¼š
- Prompts éœ€è¦ `--paths-only`, `--require-tasks`, `--include-tasks` å‚æ•°
- åŸå§‹è„šæœ¬åªæ”¯æŒ `--json` å’Œ `--help`

**å½±å“èŒƒå›´**ï¼š
- clarify Promptï¼ˆéœ€è¦ `--json --paths-only`ï¼‰
- analyze Promptï¼ˆéœ€è¦ `--json --require-tasks --include-tasks`ï¼‰
- implement Promptï¼ˆéœ€è¦ `--json --require-tasks --include-tasks`ï¼‰

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
å®Œå…¨é‡å†™ check-prerequisites.shï¼Œæ–°å¢ï¼š
```bash
--paths-only        # åªè¿”å›è·¯å¾„ï¼Œä¸æ£€æŸ¥å¯é€‰æ–‡æ¡£
--require-tasks     # å¼ºåˆ¶è¦æ±‚ tasks.md å­˜åœ¨
--include-tasks     # åœ¨ JSON è¾“å‡ºä¸­åŒ…å« TASKS è·¯å¾„
```

**éªŒè¯**ï¼š
- âœ… æ‰€æœ‰å‚æ•°ç»„åˆæµ‹è¯•é€šè¿‡
- âœ… JSON è¾“å‡ºæ ¼å¼æ­£ç¡®
- âœ… é”™è¯¯æç¤ºæ¸…æ™°

#### 2. init Tool ç¼ºå°‘ common.sh å¤åˆ¶
**é—®é¢˜**ï¼š
- setup-plan.sh å’Œ check-prerequisites.sh ä¾èµ– common.sh
- init Tool çš„ scriptsToCopy åˆ—è¡¨æ²¡æœ‰åŒ…å« common.sh

**ä¿®å¤**ï¼š
```typescript
const scriptsToCopy = [
  'create-new-feature.sh',
  'setup-plan.sh',
  'check-prerequisites.sh',
  'common.sh'  // âœ… æ–°å¢
];
```

**éªŒè¯**ï¼š
- âœ… init Tool æˆåŠŸå¤åˆ¶æ‰€æœ‰ 4 ä¸ªè„šæœ¬
- âœ… æ‰€æœ‰è„šæœ¬å¯æ‰§è¡Œæƒé™æ­£ç¡®ï¼ˆ0o755ï¼‰

### ğŸŸ¡ ä¸­ç­‰é—®é¢˜ï¼ˆå·²è§£å†³ï¼‰

#### 3. æµ‹è¯•è¦†ç›–ä¸è¶³
**åŸçŠ¶æ€**ï¼š
- åªæœ‰ç»“æ„éªŒè¯æµ‹è¯•ï¼ˆæ£€æŸ¥å¯¼å…¥å’Œç±»å‹ï¼‰
- æ²¡æœ‰è¿è¡Œæ—¶æµ‹è¯•
- æ²¡æœ‰é›†æˆæµ‹è¯•

**ä¸ºä»€ä¹ˆä¹‹å‰æµ‹è¯•èƒ½é€šè¿‡**ï¼š
- Prompts çš„ handler è¿”å› PromptMessage[]ï¼ˆæ–‡æœ¬æŒ‡ä»¤ï¼‰
- æµ‹è¯•åªéªŒè¯äº†å‡½æ•°ç­¾åï¼Œä¸æ‰§è¡Œå®é™…é€»è¾‘
- LLM è¯»å–æŒ‡ä»¤åæ‰è°ƒç”¨è„šæœ¬ï¼Œæµ‹è¯•ä¸æ¶‰åŠ

**æ–°å¢æµ‹è¯•**ï¼š
- âœ… init Tool é›†æˆæµ‹è¯•ï¼ˆ14 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
- âœ… check-prerequisites.sh å‚æ•°ç»„åˆæµ‹è¯•
- âœ… Git ç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•
- âœ… æ–‡ä»¶å¤åˆ¶ä¸æƒé™éªŒè¯

---

## å®Œæ•´ä¾èµ–æ£€æŸ¥

### âœ… init Tool ä¾èµ–ï¼ˆå…¨éƒ¨æ»¡è¶³ï¼‰

```
spec-kit-mcp/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ create-new-feature.sh      âœ… 1736 bytes
â”‚   â”œâ”€â”€ setup-plan.sh              âœ… 772 bytes
â”‚   â”œâ”€â”€ check-prerequisites.sh     âœ… 2917 bytesï¼ˆå¢å¼ºç‰ˆï¼‰
â”‚   â””â”€â”€ common.sh                  âœ… 1209 bytes
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ spec.md                    âœ… 2400 bytes
â”‚   â”œâ”€â”€ plan.md                    âœ… 3729 bytes
â”‚   â””â”€â”€ tasks.md                   âœ… 2633 bytes
â””â”€â”€ memory/
    â””â”€â”€ constitution.md            âœ… 485 bytes
```

### âœ… Prompts è¿è¡Œæ—¶ä¾èµ–ï¼ˆå…¨éƒ¨æ»¡è¶³ï¼‰

| Prompt | ä¾èµ–è„šæœ¬ | éœ€è¦å‚æ•° | çŠ¶æ€ |
|--------|---------|---------|------|
| specify | create-new-feature.sh | --json | âœ… æ”¯æŒ |
| clarify | check-prerequisites.sh | --json --paths-only | âœ… æ”¯æŒ |
| plan | setup-plan.sh | --json | âœ… æ”¯æŒ |
| tasks | check-prerequisites.sh | --json | âœ… æ”¯æŒ |
| analyze | check-prerequisites.sh | --json --require-tasks --include-tasks | âœ… æ”¯æŒ |
| implement | check-prerequisites.sh | --json --require-tasks --include-tasks | âœ… æ”¯æŒ |
| constitution | æ— è„šæœ¬ä¾èµ– | - | âœ… |

---

## ç”¨æˆ·å®Œæ•´å·¥ä½œæµéªŒè¯

### æµç¨‹ 1ï¼šåˆå§‹åŒ–é¡¹ç›® âœ…

```bash
# ç”¨æˆ·åœ¨é¡¹ç›®ä¸­è°ƒç”¨ init Tool
mcp.call_tool("init", {targetDir: "/path/to/project"})

ç»“æœï¼š
âœ… åˆ›å»º .specify/ ç›®å½•ç»“æ„
âœ… å¤åˆ¶ 4 ä¸ªè„šæœ¬ï¼ˆå¯æ‰§è¡Œï¼‰
âœ… å¤åˆ¶ 3 ä¸ªæ¨¡æ¿
âœ… åˆ›å»º constitution.md
```

### æµç¨‹ 2ï¼šåˆ›å»ºæ–°åŠŸèƒ½ âœ…

```
/specify "user authentication"
  â†“
è°ƒç”¨ create-new-feature.sh --json "user authentication"
  â†“
è¿”å›ï¼š{"BRANCH_NAME":"001-user-authentication","SPEC_FILE":"specs/001-user-authentication/spec.md","FEATURE_NUM":"001"}
  â†“
LLM åˆ›å»º branch + ç›®å½• + spec.md
```

### æµç¨‹ 3ï¼šæ¾„æ¸…éœ€æ±‚ï¼ˆå¯é€‰ï¼‰âœ…

```
/clarify
  â†“
è°ƒç”¨ check-prerequisites.sh --json --paths-only
  â†“
è¿”å›ï¼š{"FEATURE_DIR":"...","FEATURE_SPEC":"...","IMPL_PLAN":"...","TASKS":"..."}
  â†“
LLM åˆ†ææ¨¡ç³Šç‚¹ + äº¤äº’å¼æé—® + æ›´æ–° spec.md
```

### æµç¨‹ 4ï¼šåˆ›å»ºå®æ–½è®¡åˆ’ âœ…

```
/plan
  â†“
è°ƒç”¨ setup-plan.sh --json
  â†“
è¿”å›ï¼š{"FEATURE_SPEC":"...","IMPL_PLAN":"...","SPECS_DIR":"...","BRANCH":"..."}
  â†“
LLM è¯»å– spec.md + constitution.md + æ¨¡æ¿ â†’ åˆ›å»º plan.md
```

### æµç¨‹ 5ï¼šç”Ÿæˆä»»åŠ¡åˆ—è¡¨ âœ…

```
/tasks
  â†“
è°ƒç”¨ check-prerequisites.sh --json
  â†“
è¿”å›ï¼š{"FEATURE_DIR":"...","AVAILABLE_DOCS":[...]}
  â†“
LLM è¯»å– plan.md + æ¨¡æ¿ â†’ åˆ›å»º tasks.md
```

### æµç¨‹ 6ï¼šè´¨é‡åˆ†æï¼ˆå¯é€‰ï¼‰âœ…

```
/analyze
  â†“
è°ƒç”¨ check-prerequisites.sh --json --require-tasks --include-tasks
  â†“
è¿”å›ï¼š{"FEATURE_DIR":"...","AVAILABLE_DOCS":[...],"TASKS":"..."}
  â†“
LLM åˆ†æä¸€è‡´æ€§ + ç”ŸæˆæŠ¥å‘Š
```

### æµç¨‹ 7ï¼šæ‰§è¡Œå®æ–½ âœ…

```
/implement
  â†“
è°ƒç”¨ check-prerequisites.sh --json --require-tasks --include-tasks
  â†“
LLM è¯»å– tasks.md + é€é˜¶æ®µæ‰§è¡Œ + æ ‡è®°å®Œæˆ
```

---

## æµ‹è¯•è¦†ç›–è¯¦æƒ…

### å•å…ƒæµ‹è¯•ï¼ˆ21 testsï¼‰ âœ…

**æ–‡ä»¶**ï¼š`tests/server.test.ts`

- âœ… Server å®ä¾‹åˆ›å»º
- âœ… Server æ ¸å¿ƒæ–¹æ³•å­˜åœ¨
- âœ… 7 ä¸ª Prompts ç»“æ„éªŒè¯
- âœ… 3 ä¸ª Tools ç»“æ„éªŒè¯ï¼ˆå« initï¼‰
- âœ… Prompt handlers è¿”å›ç±»å‹éªŒè¯
- âœ… Pure MCP æ¶æ„éªŒè¯

### é›†æˆæµ‹è¯•ï¼ˆ14 testsï¼‰ âœ…

**æ–‡ä»¶**ï¼š`tests/integration.test.ts`

**init Tool æµ‹è¯•ï¼ˆ6 testsï¼‰**ï¼š
- âœ… åˆ›å»ºå®Œæ•´ç›®å½•ç»“æ„
- âœ… å¤åˆ¶æ‰€æœ‰è„šæœ¬
- âœ… å¤åˆ¶æ‰€æœ‰æ¨¡æ¿
- âœ… åˆ›å»º constitution.md
- âœ… è„šæœ¬å¯æ‰§è¡Œæƒé™
- âœ… force å‚æ•°éªŒè¯

**check-prerequisites.sh æµ‹è¯•ï¼ˆ7 testsï¼‰**ï¼š
- âœ… --help è¾“å‡º
- âœ… --json è¾“å‡º
- âœ… --json --paths-only
- âœ… --json --require-tasksï¼ˆç¼ºå°‘ tasks.md æ—¶æŠ¥é”™ï¼‰
- âœ… --json --include-tasks
- âœ… --json --require-tasks --include-tasks ç»„åˆ
- âœ… Git ç¯å¢ƒé›†æˆ

**è·¯å¾„æŸ¥æ‰¾æµ‹è¯•ï¼ˆ1 testï¼‰**ï¼š
- âœ… findSpecKitMcpPath() æ­£å¸¸å·¥ä½œ

---

## æ¶æ„éªŒè¯

### âœ… Pure MCP + LLM æ¶æ„

**è®¾è®¡åŸåˆ™**ï¼š
- MCP Server **åªæä¾›** Promptsï¼ˆæŒ‡ä»¤ï¼‰å’Œ Toolsï¼ˆæ“ä½œï¼‰
- MCP Server **ä¸è°ƒç”¨** LLM API
- LLM è¯»å– Prompts æŒ‡ä»¤ â†’ è‡ªä¸»æ‰§è¡Œ â†’ è°ƒç”¨ Tools

**éªŒè¯ç»“æœ**ï¼š
- âœ… æ‰€æœ‰ Prompts è¿”å› PromptMessage[]
- âœ… æ‰€æœ‰ Tools æ‰§è¡Œæ–‡ä»¶æ“ä½œ
- âœ… æ—  LLM API è°ƒç”¨ä»£ç 

### âœ… ä¾èµ–è§£è€¦

**init Tool è·¯å¾„æŸ¥æ‰¾ç­–ç•¥**ï¼š
```typescript
Strategy 1: dist/../../ (å¼€å‘/æµ‹è¯•åœºæ™¯) âœ…
Strategy 2: node_modules/@code3/spec-kit-mcp/ (npm å®‰è£…) âœ…
```

**æµ‹è¯•éªŒè¯**ï¼š
- âœ… å¼€å‘ç¯å¢ƒï¼ˆç›¸å¯¹è·¯å¾„ï¼‰æ­£å¸¸å·¥ä½œ
- âœ… æœªæ¥ npm å®‰è£…åœºæ™¯å·²è€ƒè™‘

---

## æœªå‘ç°çš„é—®é¢˜

### æ½œåœ¨æ”¹è¿›ç‚¹ï¼ˆéé˜»å¡ï¼‰

1. **E2E æµ‹è¯•ç¼ºå¤±**
   - å½“å‰æœ‰å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•
   - ç¼ºå°‘å®Œæ•´å·¥ä½œæµ E2E æµ‹è¯•ï¼ˆspecify â†’ plan â†’ tasks â†’ implementï¼‰
   - **å»ºè®®**ï¼šE2E.md ä¸­æ‰‹åŠ¨éªŒè¯ + æœªæ¥æ·»åŠ è‡ªåŠ¨åŒ– E2E

2. **é”™è¯¯å¤„ç†å¯å¢å¼º**
   - init Tool å¯¹è·¯å¾„æŸ¥æ‰¾å¤±è´¥çš„é”™è¯¯æç¤ºå¯æ›´è¯¦ç»†
   - è„šæœ¬é”™è¯¯è¾“å‡ºå¯æ›´å‹å¥½
   - **å»ºè®®**ï¼šåç»­è¿­ä»£ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

3. **æ–‡æ¡£éœ€è¦æ›´æ–°**
   - E2E.md éœ€è¦æ›´æ–° E2E-01 ç« èŠ‚
   - README éœ€è¦æ·»åŠ  init Tool ä½¿ç”¨è¯´æ˜
   - **å»ºè®®**ï¼šå®Œæˆæ–‡æ¡£æ›´æ–°åå‘å¸ƒ

---

## æœ€ç»ˆç»“è®º

### âœ… å¯æŠ•å…¥ä½¿ç”¨

spec-kit-mcp å·²å®Œæˆï¼š
1. âœ… **æ‰€æœ‰ä¾èµ–æ–‡ä»¶é½å…¨**ï¼ˆè„šæœ¬ã€æ¨¡æ¿ã€constitutionï¼‰
2. âœ… **æ‰€æœ‰åŠŸèƒ½å®Œæ•´å®ç°**ï¼ˆ7 Prompts + 4 Toolsï¼‰
3. âœ… **å‚æ•°æ”¯æŒå®Œå¤‡**ï¼ˆcheck-prerequisites.sh æ”¯æŒæ‰€æœ‰ç»„åˆï¼‰
4. âœ… **æµ‹è¯•è¦†ç›–å……åˆ†**ï¼ˆ35 tests é€šè¿‡ï¼‰
5. âœ… **æ¶æ„è®¾è®¡æ­£ç¡®**ï¼ˆPure MCP + LLMï¼‰

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ç«‹å³å¯åš**ï¼š
1. âœ… æäº¤æ‰€æœ‰æ›´æ”¹åˆ° git
2. âœ… è¿è¡Œ E2E-01 æ‰‹åŠ¨éªŒè¯
3. âœ… æ›´æ–°æ–‡æ¡£ï¼ˆE2E.md, README.mdï¼‰

**åç»­ä¼˜åŒ–**ï¼ˆå¯é€‰ï¼‰ï¼š
1. æ·»åŠ å®Œæ•´ E2E è‡ªåŠ¨åŒ–æµ‹è¯•
2. æ”¹è¿›é”™è¯¯æç¤º
3. å‘å¸ƒ npm åŒ…

---

## å®¡æŸ¥è®°å½•

| æ£€æŸ¥é¡¹ | çŠ¶æ€ | å¤‡æ³¨ |
|--------|-----|------|
| æ–‡ä»¶ä¾èµ–å®Œæ•´æ€§ | âœ… | æ‰€æœ‰ 9 ä¸ªæ–‡ä»¶é½å…¨ |
| è„šæœ¬åŠŸèƒ½æ­£ç¡®æ€§ | âœ… | æ‰€æœ‰å‚æ•°ç»„åˆéªŒè¯é€šè¿‡ |
| init Tool å¯ç”¨æ€§ | âœ… | è·¯å¾„æŸ¥æ‰¾ + æ–‡ä»¶å¤åˆ¶æ­£å¸¸ |
| Prompts æŒ‡ä»¤æ­£ç¡®æ€§ | âœ… | ç»“æ„éªŒè¯é€šè¿‡ |
| å•å…ƒæµ‹è¯•è¦†ç›– | âœ… | 21/21 é€šè¿‡ |
| é›†æˆæµ‹è¯•è¦†ç›– | âœ… | 14/14 é€šè¿‡ |
| æ¶æ„è®¾è®¡åˆç†æ€§ | âœ… | Pure MCP + LLM |
| ç”¨æˆ·å·¥ä½œæµå¯è¡Œæ€§ | âœ… | 7 ä¸ªæµç¨‹éªŒè¯é€šè¿‡ |

**æ€»åˆ†**ï¼š8/8 âœ… **é€šè¿‡**
